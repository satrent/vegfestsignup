<div class="dashboard-container">
    <header class="dashboard-header">
        <h2>Registration Dashboard</h2>
        <button class="logout-btn" (click)="logout()">Logout</button>
    </header>

    <div *ngIf="loading" class="loading-spinner">
        Loading...
    </div>

    <div *ngIf="error" class="error-message">
        {{ error }}
    </div>

    <div *ngIf="registration && !loading">
        <!-- Status Card -->
        <div class="status-card" [ngClass]="getStatusClass(registration.status)">
            <h3>Registration Status</h3>
            <div class="status-value">{{ registration.status }}</div>

            <p *ngIf="registration.status === 'In Progress'">
                Your application is currently in progress. Please complete all sections below to submit your
                application.
            </p>
            <p *ngIf="registration.status === 'Pending'">
                Your application has been submitted and is pending review. We will notify you once a decision has been
                made.
            </p>
            <p *ngIf="registration.status === 'Approved'">
                Congratulations! Your application has been approved. Welcome to the festival!
            </p>
            <p *ngIf="registration.status === 'Rejected'">
                Thank you for your interest. Unfortunately, we cannot accommodate your application this year.
            </p>

            <div class="submit-section" *ngIf="registration.status === 'In Progress' && canSubmit">
                <button class="submit-btn" (click)="submitApplication()">Submit Application</button>
            </div>
        </div>

        <!-- Sections List -->
        <div class="sections-list">
            <h3>Registration Sections</h3>

            <div class="section-item" *ngFor="let section of sections" (click)="navigateToSection(section.id)">
                <div class="section-info">
                    <span class="status-icon" [class.complete]="isSectionComplete(section.id)">
                        {{ isSectionComplete(section.id) ? '✓' : '○' }}
                    </span>
                    <span class="section-title">{{ section.title }}</span>
                </div>
                <span class="arrow">→</span>
            </div>
        </div>

        <!-- Registration Details -->
        <div class="registration-details" style="margin-top: 2rem;">
            <div class="info-section">
                <h2>Organization Information</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <label>Organization Name</label>
                        <p>{{ registration.organizationName }}</p>
                    </div>
                    <div class="info-item">
                        <label>Registration Type</label>
                        <p>{{ registration.type }}</p>
                    </div>
                    <div class="info-item" *ngIf="registration.website">
                        <label>Website</label>
                        <p><a [href]="registration.website" target="_blank">{{ registration.website }}</a></p>
                    </div>
                    <div class="info-item" *ngIf="registration.participatedBefore !== undefined">
                        <label>Participated Before</label>
                        <p>{{ registration.participatedBefore ? 'Yes' : 'No' }}</p>
                    </div>
                </div>
            </div>

            <div class="info-section">
                <h2>Contact Information</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <label>First Name</label>
                        <p>{{ registration.firstName }}</p>
                    </div>
                    <div class="info-item">
                        <label>Last Name</label>
                        <p>{{ registration.lastName }}</p>
                    </div>
                    <div class="info-item">
                        <label>Email</label>
                        <p>{{ registration.email }}</p>
                    </div>
                    <div class="info-item" *ngIf="registration.phone">
                        <label>Phone</label>
                        <p>{{ registration.phone }}</p>
                    </div>
                </div>
            </div>

            <div class="info-section"
                *ngIf="registration.address || registration.city || registration.state || registration.zip">
                <h2>Address</h2>
                <div class="info-grid">
                    <div class="info-item full-width" *ngIf="registration.address">
                        <label>Street Address</label>
                        <p>{{ registration.address }}</p>
                    </div>
                    <div class="info-item" *ngIf="registration.city">
                        <label>City</label>
                        <p>{{ registration.city }}</p>
                    </div>
                    <div class="info-item" *ngIf="registration.state">
                        <label>State</label>
                        <p>{{ registration.state }}</p>
                    </div>
                    <div class="info-item" *ngIf="registration.zip">
                        <label>Zip Code</label>
                        <p>{{ registration.zip }}</p>
                    </div>
                </div>
            </div>

            <div class="info-section metadata">
                <p class="submitted-date">Submitted on {{ registration.createdAt | date:'medium' }}</p>
            </div>
        </div>
    </div>
</div>